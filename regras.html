<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Eco /ᐠ-ᐟ\eow</title>
</head>

<style>
    *{ cursor : url('images/mouseicon.png'), auto}
			*:active{ cursor : url('images/mouseicongrab.png'), auto}
    body {
        /* background-color: #9BD4C3; */
        background-image: url('images/Water.png');
        background-size: 9%;
        margin-top: 20px; 
    }

    /* animation box2 */
    #container2 {
        position: absolute;
        width: 32px;
        height: 32px;
        margin-left: 725px;
        margin-top: 168px;
        z-index: 1;

        animation-name: box2;
        animation-duration: 2s;
        animation-iteration-count: infinite;}
    @keyframes box2{
        0%{
            transform: scale(1);
        }
        70%{
            transform: scale(1);
        }
        80%{
            transform: scale(0);
        }
        100%{
            transform: scale(0);
        }
    }

    /* animation box3 */
    #container3 img {
        width: 20px;
        height: 20px;
    }
    #inventory1 {
        position: absolute;
        margin-left: 1088px;
        margin-top: 160px;
        z-index: 1;

        animation-name:inv1;
        animation-duration: 5s;
        animation-iteration-count: infinite;
    }
    @keyframes inv1 {
            0% {
                transform: scale(0);
            }
            10% {
                transform: scale(1);
            }
            100%{
                transform: scale(1);
            }
    }

    #inventory2 {
        position: absolute;
        margin-left: 1118px;
        margin-top: 160px;
        z-index: 1;

        animation-name:inv2;
        animation-duration: 5s;
        animation-iteration-count: infinite;
    }
    @keyframes inv2 {
            0%{
                transform: scale(0);
            }
            20% {
                transform: scale(0);
            }
            30%{
                transform: scale(1);
            }
            100%{
                transform: scale(1);
            }
    }
    
    #inventory3 {
        position: absolute;
        margin-left: 1148px;
        margin-top: 160px;
        z-index: 1;

        animation-name:inv3;
        animation-duration: 5s;
        animation-iteration-count: infinite;
    }
    @keyframes inv3 {
            0% {
                transform: scale(0);
            }
            40%{
                transform: scale(0);
            }
            50% {
                transform: scale(1);
            }
            100%{
                transform: scale(1);
            }
    }

    #inventory4 {
        position: absolute;
        margin-left: 1178px;
        margin-top: 160px;
        z-index: 1;

        animation-name:inv4;
        animation-duration: 5s;
        animation-iteration-count: infinite;
    }
    @keyframes inv4 {
            0% {
                transform: scale(0);
            }
            60%{
                transform: scale(0);
            }
            70% {
                transform: scale(1);
            }
            100%{
                transform: scale(1);
            }
    }

    #inventory5 {
        position: absolute;
        margin-left: 1208px;
        margin-top: 160px;
        z-index: 1;

        animation-name:inv5;
        animation-duration: 5s;
        animation-iteration-count: infinite;
    }
    @keyframes inv5 {
            0% {
                transform: scale(0);
            }
            80%{
                transform: scale(0);
            }
            90% {
                transform: scale(1);
            }
            100%{
                transform: scale(1);
            }
    }

    #title, #myCanvas{
            position:absolute;
            margin-top: 2%;          
            animation-name: bg_in;
            animation-duration: 0.5s;
            animation-direction: normal;
            animation-iteration-count: 1;
        }
    #title{
        margin-left: 43%;
        width: 12%;
        margin-top: -2px;
    }
    #myCanvas{
        margin-top: -2px;
    }
        @keyframes bg_in {
            from {
            margin-top: -20px;
            }
            to {
            margin-top: -2px;
            }
        }
    #container4 {
        position: absolute;
        width: 32px;
        height: 32px;
        z-index: 1;

        animation-name: box4;
        animation-duration: 1.65s;
        animation-iteration-count: infinite;
    }
    @keyframes box4 {
        0%{
            margin-left: 270px;
            margin-top: 490px;
        }
        80%{
            margin-left: 320px;
            margin-top: 407px;
            transform: scale(1);
        }
        100%{
            margin-left: 320px;
            margin-top: 407px;
            transform:scale(0);
        }
    }

    
</style>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<body>
    <div id="container2">
        <img src="trash/potatochip_yellow.png">
    </div>

    <div id="container3">
        <div id="inventory1">
            <img src="trash/wine_white2.png">
        </div>
        <div id="inventory2">
            <img src="trash/rubber_duck.png">
        </div>
        <div id="inventory3">
            <img src="trash/receipt.png">
        </div>
        <div id="inventory4">
            <img src="trash/detergent.png">
        </div>
        <div id="inventory5">
            <img src="trash/candy_bar.png">
        </div>
    </div>

    <div id="container4">
        <img src="trash/paper_bag.png">
    </div>

    <div>
        <canvas id="myCanvas" width="1500" height="910" 
        style=" left: 10px; top: 0; z-index:0">
            Your browser does not support HTML5 Canvas.
        </canvas>
        <img class="title" id="title" src="images/regras.png">
    </div>
    

    <span id="loader" style="font-family: 'VT323', monospace;"></span>
    
    <script>
        const canvas = document.querySelector('#myCanvas');
		const ctx = canvas.getContext("2d");
        const W = canvas.width, H = canvas.height;

        let bg = new Image();
        bg.src='images/bg_regras.png';
        
        let kitty = new Image();
		kitty.src = 'images/kitty.png';
        
        let box = new Image();
        box.src='images/big-box.png'; 

        let button = new Image();
        button.src='images/home_btn.png';
        
        let bgbox = new Image();
        bgbox.src='images/bgbox.png'

        let bgbox2 = new Image();
        bgbox2.src='images/bgbox2.png';

        let bgbox3 = new Image();
        bgbox3.src='images/bgbox3.png'

        let bgbox4 = new Image();
        bgbox4.src='images/bgbox4.png';

        let bgbox5 = new Image();
        bgbox5.src='images/bgbox5.png';

        let bgbox6 = new Image();
        bgbox6.src='images/bgbox6.png';

        let arrows = new Image();
        arrows.src='images/arrows.png';

        let inventory = new Image();
        inventory.src='images/inventory.png';

        let actions = new Image();
        actions.src='images/actions.png';

        let ecopontos = new Image();
        ecopontos.src='images/ecopontos.png';

        let count = new Image();
        count.src='images/box5.png';

        let recycle = new Image();
        recycle.src='images/recycle.png';

        let seed = new Image();
        seed.src='images/basic_plants.png';

        let tree = new Image();
        tree.src='images/tree2.png';

        let bush = new Image();
        bush.src='images/bush.png';

        let mushroom = new Image();
        mushroom.src='images/mushroom.png';

        let rock = new Image();
        rock.src='images/rock.png';

        let tiny = new Image();
        tiny.src='images/tiny.png';

        let tronco = new Image();
        tronco.src='images/tronco.png';

        let yellow_flower = new Image();
        yellow_flower.src='images/yellow_flower.png';

        let round_tree = new Image();
        round_tree.src='images/round_tree.png';

        let blue_flower = new Image();
        blue_flower.src='images/blue_flower.png';

        let pink_flower = new Image();
        pink_flower.src='images/pink_flower.png';

        // 1st box
        let frameCol = 0;
        let frameRowD = 0;
        let frameRowU = 1;
        let frameRowL = 2;
        let frameRowR = 3;

        let frameColA = 0;
        let frameRowAR = 0;
        let frameRowAL = 1;
        let frameRowAU = 2;
        let frameRowAD = 3;
        // 2ndbox
        let frameCol2 = 0;
        let frameRow2 = 0;
        // 4th box
        let frameColE = 0;
        let frameColEA =0;
        let frameRowEV = 0;
        let frameRowEAz = 1;
        let frameRowEAm = 2;
        // 5th box
        let frameColC = 0;
        // let frameRowC = 0;
        let frameColS = 0;
        let frameRowS = 1;
        // 6th box
        let frameColK = 0;
        let frameRowK = 11;
        let frameColP = 0;
        let frameRowP = 0;
        let frameBtn = 0;

        let frameColPR = 3;
        let frameRowPR = 0;
        let frameColP1 = frameColP2 = frameColP3 = frameColP4 = frameColP5 = 0;

        let N = 0;

        window.onload = function () {
			setInterval(render, 1000 / 6);
		};
        
        
        function render() {
            ctx.clearRect(0,0,W,H);

            ctx.drawImage(bg, 50,0, canvas.width-100, canvas.height+40);
            ctx.drawImage(button, frameBtn*58/2, 0, 58/2, 28, 10, 15, 2*58/2,2*28);
            
            // regras 
            ctx.drawImage(bush, 900, 440, 35,35);
            ctx.drawImage(bush, 480, 130, 35,35);
            ctx.drawImage(bush, 1310, 760, 35,35);
            ctx.drawImage(mushroom, 570, 200, 22,22);
            ctx.drawImage(mushroom, 950, 410, 22,22);
            ctx.drawImage(mushroom, 240, 700, 22,22);
            ctx.drawImage(mushroom, 1180, 700, 18,18);
            ctx.drawImage(rock, 160, 160, 35,30);
            ctx.drawImage(rock, 1330, 520, 35,30);
            ctx.drawImage(rock, 130, 790, 35,30);
            ctx.drawImage(tiny, 160, 410, 22,12);
            ctx.drawImage(tiny, 530, 230, 22,12);
            ctx.drawImage(tiny, 130, 440, 22,12);
            ctx.drawImage(tiny, 530, 420, 22,12);
            ctx.drawImage(tiny, 940, 240, 22,12);
            ctx.drawImage(tiny, 230, 730, 22,12);
            ctx.drawImage(tiny, 260, 720, 22,12);
            ctx.drawImage(tiny, 1100, 800, 22,12);
            ctx.drawImage(tronco, 490, 440,40,30);
            ctx.drawImage(tronco, 1290, 120,40,30);
            ctx.drawImage(tronco, 1200, 680,40,30);
            ctx.drawImage(tree, frameColPR * 421/4, frameRowPR*107, 421/4, 107, 100, 100, 80,80);
            ctx.drawImage(tree, frameColPR * 421/4, frameRowPR*107, 421/4, 107, 950, 170, 80,80);
            ctx.drawImage(yellow_flower, 530, 110, 25,15);
            ctx.drawImage(yellow_flower, 990, 500, 25,15);
            ctx.drawImage(yellow_flower, 1310, 350, 25,15);
            ctx.drawImage(yellow_flower, 150, 650, 25,15);
            ctx.drawImage(blue_flower, 580, 500, 27,28);
            ctx.drawImage(blue_flower, 1330, 160, 27,28);
            ctx.drawImage(pink_flower, 130, 250, 27,20);
            ctx.drawImage(pink_flower, 890, 130, 27,20);
            ctx.drawImage(pink_flower, 1340, 375, 20,17);
            ctx.drawImage(pink_flower, 400, 770, 20,17);


            // 1st box
            ctx.shadowColor="#529758";
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 220, 80, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox, 209, 78, 51*5, 45*5);
            
            firstBoxKitty();
            firstBoxArrows();
            
            ctx.font = "25px VT323";
			ctx.fillStyle = "#B58861";
            ctx.fillText('Usa as teclas de setas', 230, 315);
            ctx.fillText('para andar pelo mapa', 238, 335);

            // 2nd
            ctx.shadowColor="#529758";
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 630, 80, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox2, 619, 78, 51*5, 45*5);
            ctx.fillText('Começa por usar a tecla G', 620, 315);
            ctx.fillText('para apanhar o lixo', 650, 335);
            secondBox();
            
            // 3rd
            ctx.shadowColor='#529758';
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 1040, 80, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox3, 1028, 78, 51*5, 45*5);
            ctx.drawImage(inventory,1050, 150, 212, 80);
            ctx.fillText('O lixo que apanhares', 1058, 315);
            ctx.fillText('vai para o inventário', 1052, 335);
            
            // 4th
            ctx.shadowColor="#529758";
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 220, 360, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox4, 209, 358, 51*5, 45*5);
            ctx.fillText('Seleciona o lixo e recicla-o', 200, 595);
            ctx.fillText('no ecoponto correto', 240, 615);
            ctx.drawImage(ecopontos, frameColE*240/5, frameRowEV*144/3, 240/5, 144/3, 245, 410, 80, 80);
            ctx.drawImage(ecopontos, frameColE*240/5, frameRowEAm*144/3, 240/5, 144/3, 345, 410, 80, 80);
            ctx.drawImage(ecopontos, frameColEA*240/5, frameRowEAz*144/3, 240/5, 140/3, 295,407,80,80);
            // setInterval(fourthBox,1000/1)
            setTimeout( function(){
            frameColEA++;
            if (frameColEA==5){
                frameColEA=4;
                setTimeout( function(){
                    frameColEA = 0;
                },400)
            }
            },300)

            // 5th
            ctx.shadowColor="#529758";
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 630, 360, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox5, 619, 358, 51*5, 45*5);
            ctx.fillText('Após cada 5 lixos reciclados', 610, 595);
            ctx.fillText('recebes 1 semente', 660, 615);
            ctx.drawImage(seed, frameColS*96/6, frameRowS*32/2, 96/6, 32/2, 680, 420, 45, 45)
            ctx.drawImage(recycle, 685, 480, 40,40);
            ctx.font = "50px VT323";
            ctx.fillText(`X ${Math.floor(N/5)}`, 750, 460);
            ctx.fillText(`X ${N}`, 750, 520);
            ctx.font = "25px VT323";
            N++;
            if(N >= 2){
                setTimeout(function(){
                    N=5;
                    setTimeout(function(){
                        N=0;
                    },600)
                },500)
            }

            // 6th
            ctx.shadowColor="#529758";
            ctx.shadowBlur = 20;
            ctx.drawImage(box, 1040, 360, 51*5, 45*5);
            ctx.shadowColor = "transparent";
            ctx.shadowBlur=0;
            ctx.drawImage(bgbox6, 1028, 358, 51*5, 45*5);
            ctx.fillText('Escolhe um pedaço de terra e planta', 990, 595);
            ctx.fillText('as tuas sementes com a tecla P', 1015, 615);
            sixthBoxKitty();
            ctx.drawImage(tree, frameColP * 421/4, frameRowP*107, 421/4, 107, 1120, 410, 80,80);
            setTimeout( function(){
                frameColP++;	
                if (frameColP == 4){
                    frameColP = 3;
                    setTimeout( function(){
                        frameColP = 0;
                    },400)
                }
            },800)

            // trees
            ctx.fillText('Planta 5 árvores para completar o jogo!', 550, 820);
            ctx.drawImage(tree, frameColP1 * 421/4, 0, 421/4, 107, 510, 690, 80,80);
            ctx.drawImage(tree, frameColP2 * 421/4, 0, 421/4, 107, 610, 690, 80,80);
            ctx.drawImage(tree, frameColP3 * 421/4, 0, 421/4, 107, 710, 690, 80,80);
            ctx.drawImage(tree, frameColP4* 421/4, 0, 421/4, 107, 810, 690, 80,80);
            ctx.drawImage(tree, frameColP5 * 421/4, 0, 421/4, 107, 910, 690, 80,80);

            frameColP1++;
        }
        

        // functions
        canvas.addEventListener('mousemove', e => {
            if(e.offsetX > 10 && e.offsetY > 15 && e.offsetX < 2*58/2 +10 && e.offsetY < 2*28 +15){
                frameBtn = 1;
            }else{
                frameBtn = 0;
            }
        })
        canvas.addEventListener('click', e => {
            if(e.offsetX > 10 && e.offsetY > 15 && e.offsetX < 2*58/2 +10 && e.offsetY < 2*28 +15){
            
                window.setTimeout(function(){
                window.location.href = './inicio.html';
                }, 300);
            }
        })

        //actions for cat 1st box
        function firstBoxKitty() {
            ctx.drawImage(kitty, frameCol * 192/4, frameRowD * 192/4, 192/4, 192/4, 250, 115, 90, 90);
            ctx.drawImage(kitty, frameCol * 192/4, frameRowU * 192/4, 192/4, 192/4, 330, 115, 90,90);
            ctx.drawImage(kitty, frameCol * 192/4, frameRowR * 192/4, 192/4, 192/4, 250, 185, 90,90);
            ctx.drawImage(kitty, frameCol * 192/4, frameRowL * 192/4, 192/4, 192/4, 330, 185,90,90);
            
            frameCol++;	
            if (frameCol == 4){
                frameCol = 0;
            }
        };

        function firstBoxArrows () {
            ctx.drawImage(arrows, frameColA * 29/2, frameRowAD * 63/4, 63/4, 29/2, 285, 115, 20, 20);
            ctx.drawImage(arrows, frameColA * 29/2, frameRowAU * 63/4, 63/4, 29/2, 365, 115, 20, 20);
            ctx.drawImage(arrows, frameColA * 29/2, frameRowAR * 63/4, 63/4, 29/2, 285, 185, 20,20);
            ctx.drawImage(arrows, frameColA * 29/2, frameRowAL * 63/4, 63/4, 29/2, 365, 185, 20, 20);
            
            frameColA++;	
            if (frameColA == 4){
                setTimeout(function(){
                    frameColA = 0;
                },600)
            }
        };

        function secondBox() {
            ctx.drawImage(kitty, frameCol2* 192/4,frameRow2* 192/4, 192/4, 192/4, 710, 125,90,90);
            setInterval(function() {
                frameCol2++;
                if (frameCol2==2){
                    frameCol2 = 0;
                }
            },1000) 
        };

        function fourthBox() {
            setTimeout( function(){

                frameColEA++;
                if (frameColEA==5){
                    frameColEA = 0;
                }
            },300)
        }

        function sixthBoxKitty() {
            ctx.drawImage(actions, frameColK* 96/2, frameRowK* 576/12, 576/12, 96/2, 1040, 420, 90,90) ;
            setInterval(function(){
                frameColK++;	
                if (frameColK == 2){
                    frameColK = 0;
                }
            }, 700)
        };

        function sixthBoxPlant() {
                frameColP++;	
                if (frameColP == 4){
                    frameColP = 0;
                }
        }


        function Trees(){
            if(frameColP1 == 4){
                frameColP1 = 3
                frameColP2++;
            }
            if(frameColP2 == 4){
                frameColP2 = 3
                frameColP3++;
            }
            if(frameColP3 == 4){
                frameColP3 = 3
                frameColP4++;
            }
            if(frameColP4 == 4){
                frameColP4 = 3
                frameColP5++;
            }
            if(frameColP5 == 4){
                frameColP5 = 3
                setTimeout(function(){
                    frameColP1 = 0;
                    frameColP2 = 0;
                    frameColP3 = 0;
                    frameColP4 = 0;
                    frameColP5 = 0;
                },2000)
            }
        }

        
    </script>
</body>

</html>